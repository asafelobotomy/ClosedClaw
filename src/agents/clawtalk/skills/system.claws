---
# CRYPTOGRAPHIC IDENTITY
signature: "0000000000000000000000000000000000000000000000000000000000000000"
signed_by: "pending_first_load"
device_binding: false
---
# MANIFEST
id: "system"
version: "1.0.0"
schema_version: "3.0"
runtime: "closedclaw_agent_v1"
memory_strategy: "ephemeral"
permissions:
    - capability: "fs.read"
      allow: ["~", "/tmp", "/etc"]
    - capability: "fs.write"
      allow: ["~", "/tmp"]
      deny: ["/etc", "/boot", "/root", "/system"]
    - capability: "exec"
      allow: ["*"]
    - capability: "clipboard"
      allow: ["read", "write"]
---
# THE VIBE

**Purpose:** File operations, directory management, shell command execution, and clipboard management. The system agent is the workhorse for interacting with the local operating system.

**Trigger:** User wants to read/write files, list directories, run shell commands, or interact with the clipboard.

**Tone:** Precise, careful, and confirmatory. Always verify paths before writing. Show relevant output from commands. Warn before destructive operations.

**Constraint:** Never execute `rm -rf /` or equivalent. Refuse to write to system directories (/etc, /boot, /root). Always use `list_directory` to verify paths before blind writes. Limit command output to 5000 chars unless asked for more.
---
# CLAW-IDL
interface SystemArgs {
  // @dialect:context.path (filesystem path)
  path?: string;
  // @dialect:context.cmd (shell command)
  command?: string;
  // Content to write
  content?: string;
  // Clipboard operation: "read" | "write"
  clipboardOp?: string;
}
---
# ENGINE
<script lang="typescript">
import { readFile, writeFile, listDir, runCommand, clipboard } from "@closedclaw/tools";

export async function execute(args: SystemArgs) {
  if (args.command) return runCommand(args.command);
  if (args.content && args.path) return writeFile(args.path, args.content);
  if (args.path) return readFile(args.path);
  if (args.clipboardOp === "read") return clipboard.read();
  if (args.clipboardOp === "write" && args.content) return clipboard.write(args.content);
  return listDir(args.path ?? ".");
}
</script>
---
# TELEMETRY
{
  "execution_count": 0,
  "success_rate": 1.0,
  "avg_latency_ms": 0,
  "errors": []
}
---
# STATE
{
  "checkpoint_id": "",
  "last_execution_variables": {}
}
---
# VERIFICATION
Theorem: SystemSafety
Analysis: 24 execution paths
Memory access: read ~/ and /tmp, write ~/ and /tmp only
Network calls: none (local operations only)
File system: deny writes to /etc, /boot, /root, /system
Status: VERIFIED
Timestamp: 2026-02-12T00:00:00Z
[Generated by Static Analyzer v1.0]
---
# THE LEXICON
{
  "mode": "hybrid_stenography",
  "pruning_level": "moderate",
  "mappings": {
    "READF": "read_file",
    "WRITEF": "write_file",
    "LSDIR": "list_directory",
    "RUNCMD": "run_command",
    "CLIPR": "clipboard_read",
    "CLIPW": "clipboard_write",
    "CURTIME": "current_time",
    "PERM": "permissions",
    "FPATH": "filepath",
    "ISDIR": "is_directory",
    "ISFILE": "is_file",
    "FSIZE": "filesize"
  },
  "path_compressions": {
    "$HOME": "~",
    "$TMP": "/tmp",
    "$CFG": "~/.closedclaw"
  },
  "priority_markers": {
    "!destructive": {
      "blocking": true,
      "priority": "critical",
      "require_biometric": true
    }
  }
}
---
# NEURAL FINGERPRINT
{
  "signature_version": "1.0",
  "neural_digest": "pending_calibration",
  "calibration_metadata": {
    "date": null,
    "runs": 0,
    "environment": "closedclaw_v2026.2",
    "baseline_similarity": null
  },
  "drift_thresholds": {
    "soft_drift": 0.85,
    "hard_drift": 0.75,
    "critical_shutdown": 0.60
  },
  "monitored_decision_points": [
    "path_validation",
    "command_safety_check",
    "write_confirmation"
  ]
}
