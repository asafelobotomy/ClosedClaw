---
# CRYPTOGRAPHIC IDENTITY
signature: "0000000000000000000000000000000000000000000000000000000000000000"
signed_by: "pending_first_load"
device_binding: false
---
# MANIFEST
id: "memory"
version: "1.0.0"
schema_version: "3.0"
runtime: "closedclaw_agent_v1"
memory_strategy: "persistent"
permissions:
    - capability: "memory.write"
      allow: ["*"]
    - capability: "memory.read"
      allow: ["*"]
    - capability: "memory.reflect"
      allow: ["*"]
---
# THE VIBE

**Purpose:** Personal knowledge base management — save, recall, search, and reflect on facts, preferences, entities, and summaries. The memory agent ensures nothing important is forgotten.

**Trigger:** User asks to remember something, recall information, search notes, or reflect on an entity's history.

**Tone:** Precise and confirmatory. Always confirm what was saved and how it was tagged. Be thorough in recall — present all relevant matches with metadata.

**Constraint:** Never delete memories without explicit user confirmation. Tag entities consistently with @Name format. Use type prefixes: W: (world fact), B: (biographical), O(c=N): (opinion with confidence), S: (summary).
---
# CLAW-IDL
interface MemoryArgs {
  // @dialect:context.action (save, recall, reflect, search)
  action: string;
  // Content to save
  content?: string;
  // Query for recall/search
  query?: string;
  // Entity filter for recall
  entity?: string;
  // Note type filter
  type?: string;
  // Time filter
  since?: string;
}
---
# ENGINE
<script lang="typescript">
import { saveNote, recallNotes, reflectMemory, currentTime } from "@closedclaw/tools";

export async function execute(args: MemoryArgs) {
  switch (args.action) {
    case "save":
      return saveNote(args.content ?? "");
    case "recall":
      return recallNotes({ query: args.query, entity: args.entity, type: args.type, since: args.since });
    case "reflect":
      return reflectMemory(args.entity ?? "");
    default:
      return recallNotes({ query: args.query });
  }
}
</script>
---
# TELEMETRY
{
  "execution_count": 0,
  "success_rate": 1.0,
  "avg_latency_ms": 0,
  "errors": []
}
---
# STATE
{
  "checkpoint_id": "",
  "last_execution_variables": {}
}
---
# VERIFICATION
Theorem: MemorySafety
Analysis: 8 execution paths
Memory access: persistent store (read/write), no deletion without confirmation
Network calls: none (local memory store)
File system: none (memory abstraction layer)
Status: VERIFIED
Timestamp: 2026-02-12T00:00:00Z
[Generated by Static Analyzer v1.0]
---
# THE LEXICON
{
  "mode": "lexicon_compact",
  "pruning_level": "light",
  "mappings": {
    "SAVMEM": "save_note",
    "RCLMEM": "recall_notes",
    "RFLTMEM": "reflect_memory",
    "CURTIME": "current_time",
    "ENT": "entity",
    "TAG": "tag",
    "WFACT": "world_fact",
    "BIO": "biographical",
    "OPIN": "opinion",
    "SUMRY": "summary",
    "SRCH": "search"
  },
  "path_compressions": {},
  "priority_markers": {
    "!delete_confirm": {
      "blocking": true,
      "priority": "high",
      "require_biometric": true
    }
  }
}
---
# NEURAL FINGERPRINT
{
  "signature_version": "1.0",
  "neural_digest": "pending_calibration",
  "calibration_metadata": {
    "date": null,
    "runs": 0,
    "environment": "closedclaw_v2026.2",
    "baseline_similarity": null
  },
  "drift_thresholds": {
    "soft_drift": 0.90,
    "hard_drift": 0.80,
    "critical_shutdown": 0.65
  },
  "monitored_decision_points": [
    "entity_tagging_consistency",
    "type_prefix_accuracy",
    "recall_relevance"
  ]
}
